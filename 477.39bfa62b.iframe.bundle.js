"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[477],{"../metrika-charts/build/_shared/format/formatting.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{T3:function(){return formatPercent},vg:function(){return formattersForTypes},wO:function(){return formatForRange}});var _metrika_elastic_charts__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/@metrika+elastic-charts@31.7.5_7qghoc6adnbztkoniq3d7qcho4/node_modules/@metrika/elastic-charts/dist/_es6/index.js"),d3_format__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/defaultLocale.js");const DAY_FORMATTER=datetime=>(0,_metrika_elastic_charts__WEBPACK_IMPORTED_MODULE_0__.g6)("DD MMM HH:mm")(datetime),MONTH_FORMATTER=(0,_metrika_elastic_charts__WEBPACK_IMPORTED_MODULE_0__.g6)("MMM'YY"),formatForRange=range=>range<7776e6?DAY_FORMATTER:date=>MONTH_FORMATTER(date).toUpperCase(),bigValueFormatter=v=>{const s=["K","M","B"];for(let i=s.length-1;i>=0;i--)if(Math.abs(v)>=Math.pow(1e3,i+1))return(v/Math.pow(1e3,i+1)).toFixed(2)+s[i];return v+""},pipe=(...fns)=>arg=>fns.reduce(((acc,fn)=>fn?fn(acc):acc),arg),microAlgoToAlgo=uAlgo=>uAlgo/1e6,formatTwoDecimalPlaces=value=>value.toLocaleString("en-US",{maximumFractionDigits:2}),formatPercent=value=>d3_format__WEBPACK_IMPORTED_MODULE_1__.WU(".2%")(value),formattersForTypes={algo_algo:[pipe(microAlgoToAlgo,formatTwoDecimalPlaces),pipe(microAlgoToAlgo,(value=>bigValueFormatter(value)))],algo_microalgo:[formatTwoDecimalPlaces,value=>bigValueFormatter(value)],algo_address:[value=>value.slice(0,6),void 0],number:[formatTwoDecimalPlaces,bigValueFormatter],percent:[formatPercent,void 0]}},"../metrika-charts/build/charts/heatmap/engine/elastic/ElasticHeatmap.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return elastic_ElasticHeatmap}});var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js"),_es6=__webpack_require__("../../node_modules/.pnpm/@metrika+elastic-charts@31.7.5_7qghoc6adnbztkoniq3d7qcho4/node_modules/@metrika/elastic-charts/dist/_es6/index.js"),cjs=__webpack_require__("../../node_modules/.pnpm/deepmerge@4.3.1/node_modules/deepmerge/dist/cjs.js"),react=__webpack_require__("../../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),formatting=__webpack_require__("../metrika-charts/build/_shared/format/formatting.js");const HEATMAP_STYLE={grid:{cellHeight:{min:0,max:"fill"},stroke:{width:0,color:"#D3DAE6"}},cell:{maxWidth:"fill",maxHeight:50,border:{stroke:"#D3DAE6",strokeWidth:0}},yAxisLabel:{visible:!0,width:"auto",fontFamily:"IBM Plex Mono",fontSize:10,padding:{left:10,right:10}},xAxisLabel:{position:"top",labelRotation:-90,fontFamily:"IBM Plex Mono",fontSize:10}};var elastic_ElasticHeatmap=props=>{var _a,_b;const className=props.className,graphData=props.data,emptyData=0===graphData.length,timeSet=new Set;graphData.forEach((datum=>timeSet.add(datum[1])));const timeArr=Array.from(timeSet).sort(),minTime=timeArr[0],maxTime=timeArr[1]-timeArr[0]+timeArr.slice(-1)[0],timeFormatter=(0,formatting.wO)(maxTime-minTime),yAxisUnit=null!==(_b=null===(_a=props.meta)||void 0===_a?void 0:_a.yAxisUnit)&&void 0!==_b?_b:"",formats=formatting.vg[yAxisUnit],config=(0,react.useMemo)((()=>{var _a;return cjs.all([HEATMAP_STYLE,{cell:{label:{visible:!!props.meta.showValueLabels,maxWidth:"fill"}},yAxisLabel:{name:props.meta.yAxisName,formatter:formats?null!==(_a=formats[1])&&void 0!==_a?_a:formats[0]:void 0},xAxisLabel:{name:props.meta.xAxisName,formatter:value=>timeFormatter(value)}}])}),[props.meta.showValueLabels,timeFormatter,formats,props.meta.yAxisName,props.meta.xAxisName]);return emptyData?null:(0,jsx_runtime.jsxs)(_es6.kL,{className:className,children:[(0,jsx_runtime.jsx)(_es6.Zr,{xDomain:{min:minTime,max:maxTime},tooltip:{customStyle:{maxWidth:"none"}}}),(0,jsx_runtime.jsx)(_es6.Xd,{id:props.meta.valueId,colorScale:_es6.N3.Linear,colors:["#ffffff","#3096D8"],data:graphData,xAccessor:1,yAccessor:0,valueAccessor:2,valueFormatter:d=>d?d.toFixed(2):d,ySortPredicate:"numAsc",xScaleType:_es6.N3.Time,config:config})]})}},"../../node_modules/.pnpm/d3-format@3.1.0/node_modules/d3-format/src/defaultLocale.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function formatDecimalParts(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}__webpack_require__.d(__webpack_exports__,{WU:function(){return format}});var prefixExponent,re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10]})}function FormatSpecifier(specifier){this.fill=void 0===specifier.fill?" ":specifier.fill+"",this.align=void 0===specifier.align?">":specifier.align+"",this.sign=void 0===specifier.sign?"-":specifier.sign+"",this.symbol=void 0===specifier.symbol?"":specifier.symbol+"",this.zero=!!specifier.zero,this.width=void 0===specifier.width?void 0:+specifier.width,this.comma=!!specifier.comma,this.precision=void 0===specifier.precision?void 0:+specifier.precision,this.trim=!!specifier.trim,this.type=void 0===specifier.type?"":specifier.type+""}function formatRounded(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var formatTypes={"%":(x,p)=>(100*x).toFixed(p),b:x=>Math.round(x).toString(2),c:x=>x+"",d:function formatDecimal(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)},e:(x,p)=>x.toExponential(p),f:(x,p)=>x.toFixed(p),g:(x,p)=>x.toPrecision(p),o:x=>Math.round(x).toString(8),p:(x,p)=>formatRounded(100*x,p),r:formatRounded,s:function formatPrefixAuto(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimalParts(x,Math.max(0,p+i-1))[0]},X:x=>Math.round(x).toString(16).toUpperCase(),x:x=>Math.round(x).toString(16)};function identity(x){return x}var defaultLocale_locale,format,map=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function locale(locale){var group=void 0===locale.grouping||void 0===locale.thousands?identity:function formatGroup(grouping,thousands){return function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}}(map.call(locale.grouping,Number),locale.thousands+""),currencyPrefix=void 0===locale.currency?"":locale.currency[0]+"",currencySuffix=void 0===locale.currency?"":locale.currency[1]+"",decimal=void 0===locale.decimal?".":locale.decimal+"",numerals=void 0===locale.numerals?identity:function formatNumerals(numerals){return function(value){return value.replace(/[0-9]/g,(function(i){return numerals[+i]}))}}(map.call(locale.numerals,String)),percent=void 0===locale.percent?"%":locale.percent+"",minus=void 0===locale.minus?"−":locale.minus+"",nan=void 0===locale.nan?"NaN":locale.nan+"";function newFormat(specifier){var fill=(specifier=formatSpecifier(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;"n"===type?(comma=!0,type="g"):formatTypes[type]||(void 0===precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currencyPrefix:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currencySuffix:/[%p]/.test(type)?percent:"",formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0||1/value<0;if(value=isNaN(value)?nan:formatType(Math.abs(value),precision),trim&&(value=function formatTrim(s){out:for(var i1,n=s.length,i=1,i0=-1;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(!+s[i])break out;i0>0&&(i0=0)}return i0>0?s.slice(0,i0)+s.slice(i1+1):s}(value)),valueNegative&&0==+value&&"+"!==sign&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:minus:"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=void 0===precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function formatPrefix(specifier,value){var f=newFormat(((specifier=formatSpecifier(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(function exponent(x){return(x=formatDecimalParts(Math.abs(x)))?x[1]:NaN}(value)/3))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}}}!function defaultLocale(definition){return defaultLocale_locale=locale(definition),format=defaultLocale_locale.format,defaultLocale_locale.formatPrefix,defaultLocale_locale}({thousands:",",grouping:[3],currency:["$",""]})},"../../node_modules/.pnpm/deepmerge@4.3.1/node_modules/deepmerge/dist/cjs.js":function(module){var isMergeableObject=function isMergeableObject(value){return function isNonNullObject(value){return!!value&&"object"==typeof value}(value)&&!function isSpecial(value){var stringValue=Object.prototype.toString.call(value);return"[object RegExp]"===stringValue||"[object Date]"===stringValue||function isReactElement(value){return value.$$typeof===REACT_ELEMENT_TYPE}(value)}(value)};var REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function cloneUnlessOtherwiseSpecified(value,options){return!1!==options.clone&&options.isMergeableObject(value)?deepmerge(function emptyTarget(val){return Array.isArray(val)?[]:{}}(value),value,options):value}function defaultArrayMerge(target,source,options){return target.concat(source).map((function(element){return cloneUnlessOtherwiseSpecified(element,options)}))}function getKeys(target){return Object.keys(target).concat(function getEnumerableOwnPropertySymbols(target){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(target).filter((function(symbol){return Object.propertyIsEnumerable.call(target,symbol)})):[]}(target))}function propertyIsOnObject(object,property){try{return property in object}catch(_){return!1}}function mergeObject(target,source,options){var destination={};return options.isMergeableObject(target)&&getKeys(target).forEach((function(key){destination[key]=cloneUnlessOtherwiseSpecified(target[key],options)})),getKeys(source).forEach((function(key){(function propertyIsUnsafe(target,key){return propertyIsOnObject(target,key)&&!(Object.hasOwnProperty.call(target,key)&&Object.propertyIsEnumerable.call(target,key))})(target,key)||(propertyIsOnObject(target,key)&&options.isMergeableObject(source[key])?destination[key]=function getMergeFunction(key,options){if(!options.customMerge)return deepmerge;var customMerge=options.customMerge(key);return"function"==typeof customMerge?customMerge:deepmerge}(key,options)(target[key],source[key],options):destination[key]=cloneUnlessOtherwiseSpecified(source[key],options))})),destination}function deepmerge(target,source,options){(options=options||{}).arrayMerge=options.arrayMerge||defaultArrayMerge,options.isMergeableObject=options.isMergeableObject||isMergeableObject,options.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var sourceIsArray=Array.isArray(source);return sourceIsArray===Array.isArray(target)?sourceIsArray?options.arrayMerge(target,source,options):mergeObject(target,source,options):cloneUnlessOtherwiseSpecified(source,options)}deepmerge.all=function deepmergeAll(array,options){if(!Array.isArray(array))throw new Error("first argument should be an array");return array.reduce((function(prev,next){return deepmerge(prev,next,options)}),{})};var deepmerge_1=deepmerge;module.exports=deepmerge_1}}]);